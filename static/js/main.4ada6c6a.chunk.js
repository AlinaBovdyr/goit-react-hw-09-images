(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={overlay:"Modal_overlay__mPBGH",modal:"Modal_modal__1cJ3i",image:"Modal_image__XidPK"}},12:function(e,t,a){e.exports={errorMessage:"ErrorView_errorMessage__18AlQ",errorImg:"ErrorView_errorImg__3c1QF"}},14:function(e,t,a){e.exports={text:"InitialView_text__38yqg"}},15:function(e,t,a){e.exports={Button:"Button_Button__206U4"}},17:function(e,t,a){e.exports={loader:"Loader_loader__3hoML"}},5:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__15qgG",SearchForm:"Searchbar_SearchForm__3ebx8",button:"Searchbar_button__1_NAg",buttonLabel:"Searchbar_buttonLabel__Jd5E-",SearchInput:"Searchbar_SearchInput__1tBhR"}},50:function(e,t,a){},51:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(4),o=a.n(c),s=a(3),i=a(9),l=a(5),u=a.n(l),j=a(1);function b(e){var t=e.onSubmit,a=Object(r.useState)(""),n=Object(s.a)(a,2),c=n[0],o=n[1];return Object(j.jsx)("header",{className:u.a.Searchbar,children:Object(j.jsxs)("form",{className:u.a.SearchForm,onSubmit:function(e){if(e.preventDefault(),""===c.trim())return i.b.error("Please, enter your search query!");t(c),o("")},children:[Object(j.jsx)("button",{type:"submit",className:u.a.button,children:Object(j.jsx)("span",{className:u.a.buttonLabel,children:"Search"})}),Object(j.jsx)("input",{className:u.a.SearchInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:c,onChange:function(e){o(e.currentTarget.value)}})]})})}var m=a(13),h="https://pixabay.com/api/",d="19151711-be14d41e7a0bdcd70a93cb54b";var g={fetchImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new URLSearchParams({q:e,image_type:"photo",orientation:"horizontal",page:t,per_page:12,key:d}),r="".concat(h,"?").concat(a);return fetch(r).then((function(t){return t.ok?t.json():Promise.reject(new Error("Bad search query :( We have no ".concat(e," images")))}))}},O=a(14),f=a.n(O),p=function(e){var t=e.text;return Object(j.jsx)("p",{className:f.a.text,children:t})},_=a.p+"static/media/error.68e486b0.jpeg",x=a(12),y=a.n(x),v=function(e){var t=e.text;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("img",{className:y.a.errorImg,src:_,alt:"sadcat"}),Object(j.jsx)("p",{className:y.a.errorMessage,children:t})]})},S=a(7),I=a.n(S),k=function(e){var t=e.url,a=e.largeImageURL,r=e.description,n=e.onImgClick;return Object(j.jsx)("li",{className:I.a.GalleryItem,children:Object(j.jsx)("img",{src:t,"data-source":a,alt:r,className:I.a.GalleryItemImage,onClick:function(e){return n(e.currentTarget)}})})},w=function(e){var t=e.hits,a=e.onClick;return Object(j.jsx)("ul",{className:I.a.ImageGallery,children:t.map((function(e){var t=e.id,r=e.webformatURL,n=e.largeImageURL,c=e.tags;return Object(j.jsx)(k,{url:r,largeImageURL:n,description:c,onImgClick:a},t)}))})},C=a(15),N=a.n(C),G=function(e){var t=e.onBtnClick;return Object(j.jsx)("button",{type:"button",className:N.a.Button,onClick:t,children:"Load more"})},L=(a(29),a(16)),B=a.n(L),E=a(17),M=a.n(E),q=function(){return Object(j.jsx)(B.a,{className:M.a.loader,type:"ThreeDots",color:"#b53f97",height:100,width:200,timeout:3e3})},U=a(18),P=a(19),F=a(21),R=a(20),A=a(10),D=a.n(A),J=document.querySelector("#modal-root"),K=function(e){Object(F.a)(a,e);var t=Object(R.a)(a);function a(){var e;Object(U.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(P.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.largeImgUrl,a=e.imgAlt;return Object(c.createPortal)(Object(j.jsx)("div",{className:D.a.overlay,onClick:this.handleBackdropClick,children:Object(j.jsx)("div",{className:D.a.modal,children:Object(j.jsx)("img",{className:D.a.image,src:t,alt:a})})}),J)}}]),a}(r.Component);function T(e){var t=e.query,a=Object(r.useState)([]),n=Object(s.a)(a,2),c=n[0],o=n[1],i=Object(r.useState)("idle"),l=Object(s.a)(i,2),u=l[0],b=l[1],h=Object(r.useState)(1),d=Object(s.a)(h,2),O=d[0],f=d[1],_=Object(r.useState)(null),x=Object(s.a)(_,2),y=x[0],S=x[1],I=Object(r.useState)(!0),k=Object(s.a)(I,2),C=k[0],N=k[1],L=Object(r.useState)(!1),B=Object(s.a)(L,2),E=B[0],M=B[1],U=Object(r.useState)(!1),P=Object(s.a)(U,2),F=P[0],R=P[1],A=Object(r.useState)(""),D=Object(s.a)(A,2),J=D[0],T=D[1],V=Object(r.useState)(""),W=Object(s.a)(V,2),H=W[0],Q=W[1];Object(r.useEffect)((function(){t&&z()}),[t]);var z=function(){M(!0),g.fetchImage(t,O).then((function(e){var a=e.hits;if(0===a.length)return Promise.reject(new Error("Bad search query :( We have no ".concat(t," images")));a.length<12&&N(!1),o((function(e){return[].concat(Object(m.a)(e),Object(m.a)(a))})),f((function(e){return e+1})),b("resolved")})).catch((function(e){S(e.message),b("rejected")})).finally((function(){return M(!1)}))},X=function(){R(!F)};return"idle"===u?Object(j.jsx)(p,{text:"Enter in the searchbar the images you want to search"}):"pending"===u?Object(j.jsx)(q,{}):"rejected"===u?Object(j.jsx)(v,{text:y}):"resolved"===u?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(w,{hits:c,onClick:function(e){T(e.alt),Q(e.dataset.source),X()}}),F&&Object(j.jsx)(K,{largeImgUrl:H,imgAlt:J,onClose:X}),C&&!E&&Object(j.jsx)(G,{onBtnClick:z}),E&&Object(j.jsx)(q,{})]}):void 0}a(49),a(50);function V(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(b,{onSubmit:function(e){n(e)}}),Object(j.jsx)(T,{query:a}),Object(j.jsx)(i.a,{autoClose:2500})]})}a(51),a(52);o.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(V,{})}),document.getElementById("root"))},7:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__29_GL",GalleryItem:"ImageGallery_GalleryItem__3LkMY",GalleryItemImage:"ImageGallery_GalleryItemImage__aRxPH"}}},[[53,1,2]]]);
//# sourceMappingURL=main.4ada6c6a.chunk.js.map